"use strict";(self.webpackChunkreact_animatable=self.webpackChunkreact_animatable||[]).push([[732],{"./stories/hooks/useAnimation.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Bars:()=>Bars,Countdown:()=>Countdown,Mouse:()=>Mouse,Path:()=>Path,Playground:()=>Playground,Sequence:()=>Sequence,ThreeDimentional:()=>ThreeDimentional,Toggle:()=>Toggle,Wave:()=>Wave,__namedExportsOrder:()=>__namedExportsOrder,default:()=>useAnimation_stories});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),useAnimation=__webpack_require__("./src/react/hooks/useAnimation.ts");function o(f){return r=>{f.forEach(n=>{"function"==typeof n?n(r):null!=n&&(n.current=r)})}}function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){var value;value=source[key],key in target?Object.defineProperty(target,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):target[key]=value})}return target}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):(function(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);keys.push.apply(keys,symbols)}return keys})(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupported_iterable_to_array(arr,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _to_consumable_array(arr){return function(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupported_iterable_to_array(arr)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var debounce=function(fn,ms){var id=null;return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];null!=id&&clearTimeout(id),id=setTimeout(function(){id=null,fn.apply(void 0,_to_consumable_array(args))},ms)}};let useAnimation_stories={parameters:{storySource:{source:'import { StoryObj } from "@storybook/react";\nimport React, { useCallback, useEffect, useState } from "react";\nimport {\n  AnimationOptions,\n  TypedEasing,\n  TypedKeyframe,\n  useAnimation,\n} from "../../src";\nimport { mergeRefs } from "react-merge-refs";\n\nconst debounce = <T extends (...args: any[]) => void>(fn: T, ms: number) => {\n  let id: NodeJS.Timeout | null = null;\n  return (...args: Parameters<T>) => {\n    if (id != null) {\n      clearTimeout(id);\n    }\n    id = setTimeout(() => {\n      id = null;\n      fn(...args);\n    }, ms);\n  };\n};\n\nexport default { component: useAnimation };\n\nexport const Playground: StoryObj = {\n  render: () => {\n    const [duration, setDuration] = useState(1000);\n    const [iteration, setIteration] = useState(2);\n    const [direction, setDirection] = useState<PlaybackDirection>("alternate");\n    const [easing, setEasing] = useState<TypedEasing>("cubic-bezier");\n    const [cubicBezierValues, setCubicBezierValues] = useState<\n      [number, number, number, number]\n    >([0.65, 0, 0.35, 1]);\n    const [stepsValues, setStepsValues] = useState<[number, string]>([\n      20,\n      "end",\n    ]);\n    const [delay, setDelay] = useState(0);\n    const [endDelay, setEndDelay] = useState(0);\n\n    const animate = useAnimation(\n      [\n        { transform: "translateX(0px)" },\n        {\n          transform: "translateX(100px) scale(2.0)",\n          fill: "red",\n        },\n      ],\n      {\n        duration: duration,\n        easing:\n          easing === "cubic-bezier"\n            ? `cubic-bezier(${cubicBezierValues.join(",")})`\n            : easing === "steps"\n            ? `steps(${stepsValues.join(",")})`\n            : easing,\n        direction: direction,\n        iterations: iteration,\n        delay,\n        endDelay,\n      }\n    );\n\n    useEffect(() => {\n      animate.play();\n    }, [\n      duration,\n      easing,\n      cubicBezierValues,\n      stepsValues,\n      iteration,\n      direction,\n      delay,\n    ]);\n\n    return (\n      <div>\n        <svg width={600} height={300} viewBox="0 0 600 300">\n          <g transform="translate(100, 100)">\n            <g ref={animate} fontSize="24px" fill="dimgray">\n              <text>Hello world</text>\n            </g>\n          </g>\n        </svg>\n        <div>\n          <button onClick={() => animate.play()}>play</button>\n          <button onClick={animate.pause}>pause</button>\n          <button onClick={animate.reverse}>reverse</button>\n          <button onClick={animate.finish}>finish</button>\n        </div>\n        <div>\n          <label>\n            duration:\n            <input\n              type="number"\n              min={0}\n              value={duration}\n              onChange={(e) => {\n                setDuration(Number(e.target.value));\n              }}\n            />\n            ms\n          </label>\n        </div>\n        <div>\n          <label>\n            iteration:\n            <input\n              type="number"\n              min={1}\n              value={iteration}\n              onChange={(e) => {\n                setIteration(Number(e.target.value));\n              }}\n            />\n          </label>\n        </div>\n        <div>\n          easing:\n          {["linear", "ease", "ease-in", "ease-out", "ease-in-out"].map((v) => (\n            <label key={v}>\n              <input\n                type="radio"\n                value={v}\n                checked={easing === v}\n                onChange={(e) => {\n                  setEasing(e.target.value as TypedEasing);\n                }}\n              />\n              {v}\n            </label>\n          ))}\n          <label>\n            <input\n              type="radio"\n              value="cubic-bezier"\n              checked={easing.indexOf("cubic-bezier") === 0}\n              onChange={(e) => {\n                setEasing(e.target.value as TypedEasing);\n              }}\n            />\n            cubic-bezier(\n            {cubicBezierValues\n              .map((v, i) => (\n                <input\n                  key={i}\n                  value={v}\n                  type="number"\n                  step={0.01}\n                  min={0}\n                  max={1}\n                  onChange={(e) => {\n                    setEasing("cubic-bezier");\n                    setCubicBezierValues((prev) => {\n                      const next: [number, number, number, number] = [...prev];\n                      next[i] = Number(e.target.value);\n                      return next;\n                    });\n                  }}\n                />\n              ))\n              .reduce((acc, v, i) => {\n                acc.push(v);\n                if (i !== cubicBezierValues.length - 1) {\n                  acc.push(",");\n                }\n                return acc;\n              }, [] as React.ReactNode[])}\n            )\n          </label>\n          <label>\n            <input\n              type="radio"\n              value="steps"\n              checked={easing.indexOf("steps") === 0}\n              onChange={(e) => {\n                setEasing(e.target.value as TypedEasing);\n              }}\n            />\n            steps(\n            {\n              <input\n                type="number"\n                step={1}\n                min={1}\n                value={stepsValues[0]}\n                onChange={(e) => {\n                  setEasing("steps");\n                  setStepsValues((prev) => [Number(e.target.value), prev[1]]);\n                }}\n              />\n            }\n            ,\n            <select\n              value={stepsValues[1]}\n              onChange={(e) => {\n                setEasing("steps");\n                setStepsValues((prev) => [prev[0], e.target.value]);\n              }}\n            >\n              {[\n                "jump-start",\n                "jump-end",\n                "jump-none",\n                "jump-both",\n                "start",\n                "end",\n              ].map((v) => (\n                <option key={v} value={v}>\n                  {v}\n                </option>\n              ))}\n            </select>\n            )\n          </label>\n        </div>\n        <div>\n          direction:\n          {["normal", "reverse", "alternate", "alternate-reverse"].map((v) => (\n            <label key={v}>\n              <input\n                type="radio"\n                value={v}\n                checked={direction === v}\n                onChange={(e) => {\n                  setDirection(e.target.value as PlaybackDirection);\n                }}\n              />\n              {v}\n            </label>\n          ))}\n        </div>\n        <div>\n          <label>\n            delay:\n            <input\n              type="number"\n              min={0}\n              value={delay}\n              onChange={(e) => {\n                setDelay(Number(e.target.value));\n              }}\n            />\n            ms\n          </label>\n        </div>\n        <div>\n          <label>\n            endDelay:\n            <input\n              type="number"\n              min={0}\n              value={endDelay}\n              onChange={(e) => {\n                setEndDelay(Number(e.target.value));\n              }}\n            />\n            ms\n          </label>\n        </div>\n        <div>\n          <label>\n            time:\n            <input\n              type="range"\n              defaultValue="0"\n              min={0}\n              max={100}\n              onChange={(e) => {\n                animate.setTime((end) => end * (Number(e.target.value) / 100));\n              }}\n            />\n          </label>\n        </div>\n        <div>\n          <label>\n            playback rate:\n            <input\n              type="number"\n              min={-100}\n              max={100}\n              defaultValue={1}\n              onChange={(e) => {\n                animate.setPlaybackRate(Number(e.target.value));\n              }}\n            />\n          </label>\n        </div>\n      </div>\n    );\n  },\n};\n\nconst Bar = ({\n  value,\n  i,\n  height,\n  keep,\n}: {\n  value: number;\n  i: number;\n  height: number;\n  keep: boolean;\n}) => {\n  const target: TypedKeyframe = {\n    height: `${value}px`,\n    transform: `translateY(-${value}px)`,\n    opacity: String(1 - i * 0.025),\n  };\n  const animate = useAnimation(\n    keep\n      ? (prev) => [\n          {\n            height: prev.height,\n            transform: prev.transform,\n            opacity: prev.opacity,\n          },\n          target,\n        ]\n      : [target],\n    { duration: 150, easing: "ease-out", delay: i * 100 }\n  );\n\n  useEffect(() => {\n    animate.play();\n  }, [value, keep]);\n\n  return (\n    <rect\n      ref={animate}\n      x={i * 20}\n      y={height}\n      width={18}\n      height={0}\n      opacity={target.opacity}\n      fill="steelblue"\n    />\n  );\n};\n\nexport const Bars: StoryObj = {\n  render: () => {\n    const init = () =>\n      Array.from({ length: 30 }).map(() => 300 * Math.random() ** 2);\n    const [rects, setRects] = useState(init);\n    const [keep, setKeep] = useState(false);\n\n    const width = 800;\n    const height = 400;\n    const margin = 10;\n    const maxBarHeight = height - margin * 2;\n\n    const refresh = () => setRects(init());\n\n    return (\n      <>\n        <div>\n          <button onClick={refresh}>refresh</button>\n          <label>\n            <input\n              type="checkbox"\n              checked={keep}\n              onChange={(e) => {\n                setKeep(e.target.checked);\n                refresh();\n              }}\n            />\n            keep\n          </label>\n        </div>\n        <div>\n          <svg width={width} height={height}>\n            <g transform={`translate(${margin},${margin})`}>\n              {rects.map((v, i) => (\n                <Bar\n                  key={i}\n                  i={i}\n                  value={v}\n                  height={maxBarHeight}\n                  keep={keep}\n                />\n              ))}\n            </g>\n          </svg>\n        </div>\n      </>\n    );\n  },\n};\n\nexport const Mouse: StoryObj = {\n  render: () => {\n    const rotate = useAnimation(\n      [\n        { transform: "rotate(0deg)", borderRadius: "1rem" },\n        { transform: "rotate(360deg)", borderRadius: "50%" },\n        { transform: "rotate(720deg)", borderRadius: "1rem" },\n      ],\n      {\n        duration: 1000,\n        iterations: Infinity,\n        easing: "ease-in-out",\n      }\n    );\n    const move = useAnimation<{ x: number; y: number }>(\n      (prev, pos) => [\n        { transform: prev.transform },\n        { transform: `translate(${pos.x}px, ${pos.y}px)` },\n      ],\n      {\n        duration: 400,\n        easing: "ease-in-out",\n      }\n    );\n\n    useEffect(() => {\n      rotate.play();\n\n      const onPointerMove = debounce((e: PointerEvent) => {\n        move.play({ args: { x: e.clientX, y: e.clientY } });\n      }, 100);\n      window.addEventListener("pointermove", onPointerMove);\n      return () => {\n        window.removeEventListener("pointermove", onPointerMove);\n      };\n    }, []);\n\n    return (\n      <div>\n        <div>Move mouse cursor.</div>\n        <div ref={move}>\n          <div\n            ref={rotate}\n            style={{\n              position: "fixed",\n              border: "solid 0.1rem #135569",\n              height: "6rem",\n              width: "6rem",\n              top: "-3rem",\n              left: "-3rem",\n            }}\n          />\n        </div>\n      </div>\n    );\n  },\n};\n\nexport const Toggle: StoryObj = {\n  render: () => {\n    const animate = useAnimation(\n      { transform: "translate3d(400px, 0, 0)" },\n      { duration: 800, easing: "ease-in-out" }\n    );\n\n    useEffect(() => {\n      animate.play();\n    }, [animate]);\n\n    return (\n      <div>\n        <button onClick={animate.reverse}>Toggle</button>\n        <div className="rail">\n          <div ref={animate} className="block" />\n        </div>\n        <style>\n          {`\n.rail {\n  border-radius: 4px;\n  background-color: rgb(240, 240, 232);\n  position: relative;\n  margin: 5px 3px 10px;\n  width: 450px;\n  height: 50px;\n}\n.block {\n  position: absolute;\n  width: 50px;\n  height: 50px;\n  border-radius: 4px;\n  background-color: rgb(130, 181, 198);\n}\n`}\n        </style>\n      </div>\n    );\n  },\n};\n\nexport const Path: StoryObj = {\n  render: () => {\n    const animate = useAnimation(\n      [\n        { d: "path(\'M50,50L150,50L150,150L50,150z\')" },\n        { d: "path(\'M100,30L170,170L30,170L30,170z\')" },\n      ],\n      {\n        duration: 1000,\n        easing: "ease-in-out",\n        iterations: Infinity,\n        direction: "alternate",\n      }\n    );\n\n    useEffect(() => {\n      animate.play();\n    }, []);\n\n    const width = 400;\n    const height = 300;\n\n    return (\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`}>\n        <path ref={animate} fill="orange" />\n      </svg>\n    );\n  },\n};\n\nexport const ThreeDimentional: StoryObj = {\n  render: () => {\n    const [pos, setPos] = useState({ x: 1, y: 1 });\n    const animate = useAnimation(\n      { transform: `rotate3d(${pos.y / 100}, ${pos.x / 100}, 0, 360deg)` },\n      {\n        duration: 1000,\n        iterations: Infinity,\n      }\n    );\n\n    useEffect(() => {\n      animate.play();\n    }, [pos]);\n\n    useEffect(() => {\n      const onPointerMove = (e: PointerEvent) => {\n        setPos({ x: e.clientX, y: e.clientY });\n      };\n      window.addEventListener("pointermove", onPointerMove);\n      return () => {\n        window.removeEventListener("pointermove", onPointerMove);\n      };\n    }, []);\n\n    return (\n      <>\n        <div\n          ref={animate}\n          style={{\n            width: 100,\n            height: 100,\n            margin: 100,\n            transformStyle: "preserve-3d",\n          }}\n        >\n          <div className="face front" />\n          <div className="face back" />\n          <div className="face right" />\n          <div className="face left" />\n          <div className="face top" />\n          <div className="face bottom" />\n        </div>\n        <style>\n          {`\n            .face {\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              width: 100%;\n              height: 100%;\n              position: absolute;\n              backface-visibility: inherit;\n              font-size: 60px;\n              color: #fff;\n            }\n            .front {\n              background: rgba(90,90,90,.7);\n              transform: translateZ(50px);\n            }\n            .back {\n              background: rgba(0,210,0,.7);\n              transform: rotateY(180deg) translateZ(50px);\n            }\n            .right {\n              background: rgba(210,0,0,.7);\n              transform: rotateY(90deg) translateZ(50px);\n            }\n            .left {\n              background: rgba(0,0,210,.7);\n              transform: rotateY(-90deg) translateZ(50px);\n            }\n            .top {\n              background: rgba(210,210,0,.7);\n              transform: rotateX(90deg) translateZ(50px);\n            }\n            .bottom {\n              background: rgba(210,0,210,.7);\n              transform: rotateX(-90deg) translateZ(50px);\n            }\n            `}\n        </style>\n      </>\n    );\n  },\n  name: "3D",\n};\n\nexport const Sequence: StoryObj = {\n  render: () => {\n    const animate = useAnimation<string>(\n      (prev, color) => [{ fill: prev.fill }, { fill: color }],\n      { duration: 600, easing: "ease-out" }\n    );\n\n    const onClickAll = useCallback(async () => {\n      try {\n        await animate.play({ args: "red" }).waitFor("finish");\n        await animate.play({ args: "blue" }).waitFor("finish");\n        await animate.play({ args: "green" }).waitFor("finish");\n      } catch (e) {\n        // ignore uncaught promise error\n      }\n    }, []);\n\n    useEffect(() => {\n      onClickAll();\n    }, []);\n\n    return (\n      <div>\n        <svg width={150} height={150}>\n          <path\n            ref={animate}\n            d="M 10,30 A 20,20 0,0,1 50,30 A 20,20 0,0,1 90,30 Q 90,60 50,90 Q 10,60 10,30 z"\n          />\n        </svg>\n        <div>\n          <button\n            onClick={() => {\n              animate.play({ args: "red" });\n            }}\n          >\n            Red\n          </button>\n          <button\n            onClick={() => {\n              animate.play({ args: "blue" });\n            }}\n          >\n            Blue\n          </button>\n          <button\n            onClick={() => {\n              animate.play({ args: "green" });\n            }}\n          >\n            Green\n          </button>\n          <button onClick={onClickAll}>All</button>\n        </div>\n      </div>\n    );\n  },\n};\n\nconst WavedRect = ({ i }: { i: number }) => {\n  const baseTiming: AnimationOptions = {\n    easing: "ease-in-out",\n    iterations: Infinity,\n    direction: "alternate",\n    delay: i * 98,\n  };\n  const move = useAnimation(\n    [\n      { transform: "translateY(0) scaleX(.8)" },\n      { transform: "translateY(95vh) scaleX(1)" },\n    ],\n    { ...baseTiming, duration: 2500 }\n  );\n  const opacity = useAnimation([{ opacity: 1 }, { opacity: 0 }], {\n    ...baseTiming,\n    duration: 2000,\n  });\n  const color = useAnimation(\n    [{ backgroundColor: "rgb(239, 239, 255)" }, { backgroundColor: "#e4c349" }],\n    { ...baseTiming, duration: 3000 }\n  );\n\n  useEffect(() => {\n    move.play();\n    opacity.play();\n    color.play();\n  }, []);\n\n  return (\n    <div\n      ref={mergeRefs([move, opacity, color])}\n      style={{\n        width: "5vw",\n        height: "2.5vh",\n        background: "#efefff",\n        borderRadius: "1vh",\n      }}\n    />\n  );\n};\n\nexport const Wave: StoryObj = {\n  render: () => {\n    const [rects] = useState(() => Array.from({ length: 20 }).map((_, i) => i));\n\n    return (\n      <div\n        style={{\n          background: "#e45349",\n          width: "100vw",\n          height: "100vh",\n          display: "flex",\n          justifyContent: "center",\n        }}\n      >\n        {rects.map((i) => (\n          <WavedRect key={i} i={i} />\n        ))}\n      </div>\n    );\n  },\n};\n\nexport const Countdown: StoryObj = {\n  render: () => {\n    const [count, setCount] = useState(10);\n    const countAnimation = useAnimation(\n      [\n        { opacity: 1, transform: "scale(.6)" },\n        { opacity: 0.5, transform: "scale(1)" },\n      ],\n      {\n        duration: 500,\n        easing: "linear",\n        delay: 0,\n        iterations: 1000,\n        direction: "alternate",\n      }\n    );\n    const boomAnimation = useAnimation(\n      [\n        {\n          opacity: 0,\n          transform: "scale(.01) rotate(0deg)",\n          color: "white",\n          offset: 0,\n        },\n        {\n          opacity: 1,\n          transform: "scale(6) rotate(360deg)",\n          color: "orange",\n          offset: 0.8,\n        },\n        {\n          opacity: 1,\n          transform: "scale(1) rotate(720deg)",\n          color: "white",\n          offset: 1,\n        },\n      ],\n      {\n        duration: 2000,\n        easing: "ease-out",\n        delay: 0,\n        iterations: 1,\n      }\n    );\n\n    useEffect(() => {\n      countAnimation.play();\n      let startCount = count;\n\n      const id = setInterval(() => {\n        startCount -= 1;\n        setCount((p) => p - 1);\n\n        if (startCount > 0) {\n          countAnimation.setPlaybackRate((prev) => Math.min(prev * 1.15, 6));\n        } else {\n          clearInterval(id);\n          boomAnimation.play();\n        }\n      }, 1000);\n\n      return () => {\n        clearInterval(id);\n      };\n    }, []);\n    return (\n      <div\n        style={{\n          background: "gray",\n          width: 400,\n          height: 400,\n          display: "flex",\n          alignItems: "center",\n          justifyContent: "center",\n        }}\n      >\n        <span\n          ref={mergeRefs([countAnimation, boomAnimation])}\n          style={{ color: "white", fontSize: 64, fontWeight: "bold" }}\n        >\n          {count}\n        </span>\n      </div>\n    );\n  },\n};\n\n// const Block = ({ i, length: n }: { i: number; length: number }) => {\n//   const timing: AnimationOptions = {\n//     duration: 250,\n//   };\n//   const one = useAnimation(\n//     [{ backgroundColor: "#eee" }, { backgroundColor: "steelblue" }],\n//     { ...timing, endDelay: 1000 }\n//   );\n//   const two = useAnimation(\n//     [{ backgroundColor: "steelblue" }, { backgroundColor: "orange" }],\n//     { ...timing, endDelay: 1000 }\n//   );\n//   const three = useAnimation(\n//     [{ backgroundColor: "orange" }, { backgroundColor: "#eee" }],\n//     { ...timing, endDelay: n }\n//   );\n\n//   useEffect(() => {\n//     one.cancel();\n//     two.cancel();\n//     three.cancel();\n//     const run = async () => {\n//       try {\n//         await one.play().waitFor("finish");\n//         one.cancel();\n//         await two.play().waitFor("finish");\n//         two.cancel();\n//         await three.play().waitFor("finish");\n//         three.cancel();\n//         run();\n//       } catch (e) {\n//         // ignore uncaught promise error\n//       }\n//     };\n//     setTimeout(run, i + (Math.random() * n) / 4);\n//   }, []);\n\n//   return (\n//     <div\n//       ref={mergeRefs([one, two, three])}\n//       style={{\n//         width: 10,\n//         height: 10,\n//         margin: " 1px 0 0 1px",\n//         float: "left",\n//         background: "#eee",\n//         display: "inline-block",\n//       }}\n//     />\n//   );\n// };\n\n// export const Chained: StoryObj = {\n//   render: () => {\n//     const length = 4002;\n//     return (\n//       <div style={{ maxWidth: 960 }}>\n//         {Array.from({ length: length }).map((_, i) => (\n//           <Block key={i} i={i} length={length} />\n//         ))}\n//       </div>\n//     );\n//   },\n// };\n',locationsMap:{playground:{startLoc:{col:36,line:26},endLoc:{col:1,line:293},startBody:{col:36,line:26},endBody:{col:1,line:293}},bars:{startLoc:{col:30,line:342},endLoc:{col:1,line:390},startBody:{col:30,line:342},endBody:{col:1,line:390}},mouse:{startLoc:{col:31,line:392},endLoc:{col:1,line:448},startBody:{col:31,line:392},endBody:{col:1,line:448}},toggle:{startLoc:{col:32,line:450},endLoc:{col:1,line:489},startBody:{col:32,line:450},endBody:{col:1,line:489}},path:{startLoc:{col:30,line:491},endLoc:{col:1,line:519},startBody:{col:30,line:491},endBody:{col:1,line:519}},"three-dimentional":{startLoc:{col:42,line:521},endLoc:{col:1,line:607},startBody:{col:42,line:521},endBody:{col:1,line:607}},sequence:{startLoc:{col:34,line:609},endLoc:{col:1,line:665},startBody:{col:34,line:609},endBody:{col:1,line:665}},wave:{startLoc:{col:30,line:709},endLoc:{col:1,line:729},startBody:{col:30,line:709},endBody:{col:1,line:729}},countdown:{startLoc:{col:35,line:731},endLoc:{col:1,line:816},startBody:{col:35,line:731},endBody:{col:1,line:816}}}}},component:useAnimation._};var Playground={render:function(){var _useState=_sliced_to_array((0,react.useState)(1e3),2),duration=_useState[0],setDuration=_useState[1],_useState1=_sliced_to_array((0,react.useState)(2),2),iteration=_useState1[0],setIteration=_useState1[1],_useState2=_sliced_to_array((0,react.useState)("alternate"),2),direction=_useState2[0],setDirection=_useState2[1],_useState3=_sliced_to_array((0,react.useState)("cubic-bezier"),2),easing=_useState3[0],setEasing=_useState3[1],_useState4=_sliced_to_array((0,react.useState)([.65,0,.35,1]),2),cubicBezierValues=_useState4[0],setCubicBezierValues=_useState4[1],_useState5=_sliced_to_array((0,react.useState)([20,"end"]),2),stepsValues=_useState5[0],setStepsValues=_useState5[1],_useState6=_sliced_to_array((0,react.useState)(0),2),delay=_useState6[0],setDelay=_useState6[1],_useState7=_sliced_to_array((0,react.useState)(0),2),endDelay=_useState7[0],setEndDelay=_useState7[1],animate=(0,useAnimation._)([{transform:"translateX(0px)"},{transform:"translateX(100px) scale(2.0)",fill:"red"}],{duration:duration,easing:"cubic-bezier"===easing?"cubic-bezier(".concat(cubicBezierValues.join(","),")"):"steps"===easing?"steps(".concat(stepsValues.join(","),")"):easing,direction:direction,iterations:iteration,delay:delay,endDelay:endDelay});return(0,react.useEffect)(function(){animate.play()},[duration,easing,cubicBezierValues,stepsValues,iteration,direction,delay]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("svg",{width:600,height:300,viewBox:"0 0 600 300",children:(0,jsx_runtime.jsx)("g",{transform:"translate(100, 100)",children:(0,jsx_runtime.jsx)("g",{ref:animate,fontSize:"24px",fill:"dimgray",children:(0,jsx_runtime.jsx)("text",{children:"Hello world"})})})}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:function(){return animate.play()},children:"play"}),(0,jsx_runtime.jsx)("button",{onClick:animate.pause,children:"pause"}),(0,jsx_runtime.jsx)("button",{onClick:animate.reverse,children:"reverse"}),(0,jsx_runtime.jsx)("button",{onClick:animate.finish,children:"finish"})]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("label",{children:["duration:",(0,jsx_runtime.jsx)("input",{type:"number",min:0,value:duration,onChange:function(e){setDuration(Number(e.target.value))}}),"ms"]})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("label",{children:["iteration:",(0,jsx_runtime.jsx)("input",{type:"number",min:1,value:iteration,onChange:function(e){setIteration(Number(e.target.value))}})]})}),(0,jsx_runtime.jsxs)("div",{children:["easing:",["linear","ease","ease-in","ease-out","ease-in-out"].map(function(v){return(0,jsx_runtime.jsxs)("label",{children:[(0,jsx_runtime.jsx)("input",{type:"radio",value:v,checked:easing===v,onChange:function(e){setEasing(e.target.value)}}),v]},v)}),(0,jsx_runtime.jsxs)("label",{children:[(0,jsx_runtime.jsx)("input",{type:"radio",value:"cubic-bezier",checked:0===easing.indexOf("cubic-bezier"),onChange:function(e){setEasing(e.target.value)}}),"cubic-bezier(",cubicBezierValues.map(function(v,i){return(0,jsx_runtime.jsx)("input",{value:v,type:"number",step:.01,min:0,max:1,onChange:function(e){setEasing("cubic-bezier"),setCubicBezierValues(function(prev){var next=_to_consumable_array(prev);return next[i]=Number(e.target.value),next})}},i)}).reduce(function(acc,v,i){return acc.push(v),i!==cubicBezierValues.length-1&&acc.push(","),acc},[]),")"]}),(0,jsx_runtime.jsxs)("label",{children:[(0,jsx_runtime.jsx)("input",{type:"radio",value:"steps",checked:0===easing.indexOf("steps"),onChange:function(e){setEasing(e.target.value)}}),"steps(",(0,jsx_runtime.jsx)("input",{type:"number",step:1,min:1,value:stepsValues[0],onChange:function(e){setEasing("steps"),setStepsValues(function(prev){return[Number(e.target.value),prev[1]]})}}),",",(0,jsx_runtime.jsx)("select",{value:stepsValues[1],onChange:function(e){setEasing("steps"),setStepsValues(function(prev){return[prev[0],e.target.value]})},children:["jump-start","jump-end","jump-none","jump-both","start","end"].map(function(v){return(0,jsx_runtime.jsx)("option",{value:v,children:v},v)})}),")"]})]}),(0,jsx_runtime.jsxs)("div",{children:["direction:",["normal","reverse","alternate","alternate-reverse"].map(function(v){return(0,jsx_runtime.jsxs)("label",{children:[(0,jsx_runtime.jsx)("input",{type:"radio",value:v,checked:direction===v,onChange:function(e){setDirection(e.target.value)}}),v]},v)})]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("label",{children:["delay:",(0,jsx_runtime.jsx)("input",{type:"number",min:0,value:delay,onChange:function(e){setDelay(Number(e.target.value))}}),"ms"]})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("label",{children:["endDelay:",(0,jsx_runtime.jsx)("input",{type:"number",min:0,value:endDelay,onChange:function(e){setEndDelay(Number(e.target.value))}}),"ms"]})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("label",{children:["time:",(0,jsx_runtime.jsx)("input",{type:"range",defaultValue:"0",min:0,max:100,onChange:function(e){animate.setTime(function(end){return end*(Number(e.target.value)/100)})}})]})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("label",{children:["playback rate:",(0,jsx_runtime.jsx)("input",{type:"number",min:-100,max:100,defaultValue:1,onChange:function(e){animate.setPlaybackRate(Number(e.target.value))}})]})})]})}},Bar=function(param){var value=param.value,i=param.i,height=param.height,keep=param.keep,target={height:"".concat(value,"px"),transform:"translateY(-".concat(value,"px)"),opacity:String(1-.025*i)},animate=(0,useAnimation._)(keep?function(prev){return[{height:prev.height,transform:prev.transform,opacity:prev.opacity},target]}:[target],{duration:150,easing:"ease-out",delay:100*i});return(0,react.useEffect)(function(){animate.play()},[value,keep]),(0,jsx_runtime.jsx)("rect",{ref:animate,x:20*i,y:height,width:18,height:0,opacity:target.opacity,fill:"steelblue"})},Bars={render:function(){var init=function(){return Array.from({length:30}).map(function(){return 300*Math.pow(Math.random(),2)})},_useState=_sliced_to_array((0,react.useState)(init),2),rects=_useState[0],setRects=_useState[1],_useState1=_sliced_to_array((0,react.useState)(!1),2),keep=_useState1[0],setKeep=_useState1[1],refresh=function(){return setRects(init())};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:refresh,children:"refresh"}),(0,jsx_runtime.jsxs)("label",{children:[(0,jsx_runtime.jsx)("input",{type:"checkbox",checked:keep,onChange:function(e){setKeep(e.target.checked),refresh()}}),"keep"]})]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("svg",{width:800,height:400,children:(0,jsx_runtime.jsx)("g",{transform:"translate(".concat(10,",").concat(10,")"),children:rects.map(function(v,i){return(0,jsx_runtime.jsx)(Bar,{i:i,value:v,height:380,keep:keep},i)})})})})]})}},Mouse={render:function(){var rotate=(0,useAnimation._)([{transform:"rotate(0deg)",borderRadius:"1rem"},{transform:"rotate(360deg)",borderRadius:"50%"},{transform:"rotate(720deg)",borderRadius:"1rem"}],{duration:1e3,iterations:1/0,easing:"ease-in-out"}),move=(0,useAnimation._)(function(prev,pos){return[{transform:prev.transform},{transform:"translate(".concat(pos.x,"px, ").concat(pos.y,"px)")}]},{duration:400,easing:"ease-in-out"});return(0,react.useEffect)(function(){rotate.play();var onPointerMove=debounce(function(e){move.play({args:{x:e.clientX,y:e.clientY}})},100);return window.addEventListener("pointermove",onPointerMove),function(){window.removeEventListener("pointermove",onPointerMove)}},[]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{children:"Move mouse cursor."}),(0,jsx_runtime.jsx)("div",{ref:move,children:(0,jsx_runtime.jsx)("div",{ref:rotate,style:{position:"fixed",border:"solid 0.1rem #135569",height:"6rem",width:"6rem",top:"-3rem",left:"-3rem"}})})]})}},Toggle={render:function(){var animate=(0,useAnimation._)({transform:"translate3d(400px, 0, 0)"},{duration:800,easing:"ease-in-out"});return(0,react.useEffect)(function(){animate.play()},[animate]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:animate.reverse,children:"Toggle"}),(0,jsx_runtime.jsx)("div",{className:"rail",children:(0,jsx_runtime.jsx)("div",{ref:animate,className:"block"})}),(0,jsx_runtime.jsx)("style",{children:"\n.rail {\n  border-radius: 4px;\n  background-color: rgb(240, 240, 232);\n  position: relative;\n  margin: 5px 3px 10px;\n  width: 450px;\n  height: 50px;\n}\n.block {\n  position: absolute;\n  width: 50px;\n  height: 50px;\n  border-radius: 4px;\n  background-color: rgb(130, 181, 198);\n}\n"})]})}},Path={render:function(){var animate=(0,useAnimation._)([{d:"path('M50,50L150,50L150,150L50,150z')"},{d:"path('M100,30L170,170L30,170L30,170z')"}],{duration:1e3,easing:"ease-in-out",iterations:1/0,direction:"alternate"});return(0,react.useEffect)(function(){animate.play()},[]),(0,jsx_runtime.jsx)("svg",{width:400,height:300,viewBox:"0 0 ".concat(400," ").concat(300),children:(0,jsx_runtime.jsx)("path",{ref:animate,fill:"orange"})})}},ThreeDimentional={render:function(){var _useState=_sliced_to_array((0,react.useState)({x:1,y:1}),2),pos=_useState[0],setPos=_useState[1],animate=(0,useAnimation._)({transform:"rotate3d(".concat(pos.y/100,", ").concat(pos.x/100,", 0, 360deg)")},{duration:1e3,iterations:1/0});return(0,react.useEffect)(function(){animate.play()},[pos]),(0,react.useEffect)(function(){var onPointerMove=function(e){setPos({x:e.clientX,y:e.clientY})};return window.addEventListener("pointermove",onPointerMove),function(){window.removeEventListener("pointermove",onPointerMove)}},[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{ref:animate,style:{width:100,height:100,margin:100,transformStyle:"preserve-3d"},children:[(0,jsx_runtime.jsx)("div",{className:"face front"}),(0,jsx_runtime.jsx)("div",{className:"face back"}),(0,jsx_runtime.jsx)("div",{className:"face right"}),(0,jsx_runtime.jsx)("div",{className:"face left"}),(0,jsx_runtime.jsx)("div",{className:"face top"}),(0,jsx_runtime.jsx)("div",{className:"face bottom"})]}),(0,jsx_runtime.jsx)("style",{children:"\n            .face {\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              width: 100%;\n              height: 100%;\n              position: absolute;\n              backface-visibility: inherit;\n              font-size: 60px;\n              color: #fff;\n            }\n            .front {\n              background: rgba(90,90,90,.7);\n              transform: translateZ(50px);\n            }\n            .back {\n              background: rgba(0,210,0,.7);\n              transform: rotateY(180deg) translateZ(50px);\n            }\n            .right {\n              background: rgba(210,0,0,.7);\n              transform: rotateY(90deg) translateZ(50px);\n            }\n            .left {\n              background: rgba(0,0,210,.7);\n              transform: rotateY(-90deg) translateZ(50px);\n            }\n            .top {\n              background: rgba(210,210,0,.7);\n              transform: rotateX(90deg) translateZ(50px);\n            }\n            .bottom {\n              background: rgba(210,0,210,.7);\n              transform: rotateX(-90deg) translateZ(50px);\n            }\n            "})]})},name:"3D"},Sequence={render:function(){var fn,animate=(0,useAnimation._)(function(prev,color){return[{fill:prev.fill},{fill:color}]},{duration:600,easing:"ease-out"}),onClickAll=(0,react.useCallback)((fn=function(){return function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,4,,5]),[4,animate.play({args:"red"}).waitFor("finish")];case 1:return _state.sent(),[4,animate.play({args:"blue"}).waitFor("finish")];case 2:return _state.sent(),[4,animate.play({args:"green"}).waitFor("finish")];case 3:case 4:return _state.sent(),[3,5];case 5:return[2]}})},function(){var self1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self1,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}),[]);return(0,react.useEffect)(function(){onClickAll()},[]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("svg",{width:150,height:150,children:(0,jsx_runtime.jsx)("path",{ref:animate,d:"M 10,30 A 20,20 0,0,1 50,30 A 20,20 0,0,1 90,30 Q 90,60 50,90 Q 10,60 10,30 z"})}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:function(){animate.play({args:"red"})},children:"Red"}),(0,jsx_runtime.jsx)("button",{onClick:function(){animate.play({args:"blue"})},children:"Blue"}),(0,jsx_runtime.jsx)("button",{onClick:function(){animate.play({args:"green"})},children:"Green"}),(0,jsx_runtime.jsx)("button",{onClick:onClickAll,children:"All"})]})]})}},WavedRect=function(param){var baseTiming={easing:"ease-in-out",iterations:1/0,direction:"alternate",delay:98*param.i},move=(0,useAnimation._)([{transform:"translateY(0) scaleX(.8)"},{transform:"translateY(95vh) scaleX(1)"}],_object_spread_props(_object_spread({},baseTiming),{duration:2500})),opacity=(0,useAnimation._)([{opacity:1},{opacity:0}],_object_spread_props(_object_spread({},baseTiming),{duration:2e3})),color=(0,useAnimation._)([{backgroundColor:"rgb(239, 239, 255)"},{backgroundColor:"#e4c349"}],_object_spread_props(_object_spread({},baseTiming),{duration:3e3}));return(0,react.useEffect)(function(){move.play(),opacity.play(),color.play()},[]),(0,jsx_runtime.jsx)("div",{ref:o([move,opacity,color]),style:{width:"5vw",height:"2.5vh",background:"#efefff",borderRadius:"1vh"}})},Wave={render:function(){var rects=_sliced_to_array((0,react.useState)(function(){return Array.from({length:20}).map(function(_,i){return i})}),1)[0];return(0,jsx_runtime.jsx)("div",{style:{background:"#e45349",width:"100vw",height:"100vh",display:"flex",justifyContent:"center"},children:rects.map(function(i){return(0,jsx_runtime.jsx)(WavedRect,{i:i},i)})})}},Countdown={render:function(){var _useState=_sliced_to_array((0,react.useState)(10),2),count=_useState[0],setCount=_useState[1],countAnimation=(0,useAnimation._)([{opacity:1,transform:"scale(.6)"},{opacity:.5,transform:"scale(1)"}],{duration:500,easing:"linear",delay:0,iterations:1e3,direction:"alternate"}),boomAnimation=(0,useAnimation._)([{opacity:0,transform:"scale(.01) rotate(0deg)",color:"white",offset:0},{opacity:1,transform:"scale(6) rotate(360deg)",color:"orange",offset:.8},{opacity:1,transform:"scale(1) rotate(720deg)",color:"white",offset:1}],{duration:2e3,easing:"ease-out",delay:0,iterations:1});return(0,react.useEffect)(function(){countAnimation.play();var startCount=count,id=setInterval(function(){startCount-=1,setCount(function(p){return p-1}),startCount>0?countAnimation.setPlaybackRate(function(prev){return Math.min(1.15*prev,6)}):(clearInterval(id),boomAnimation.play())},1e3);return function(){clearInterval(id)}},[]),(0,jsx_runtime.jsx)("div",{style:{background:"gray",width:400,height:400,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,jsx_runtime.jsx)("span",{ref:o([countAnimation,boomAnimation]),style:{color:"white",fontSize:64,fontWeight:"bold"},children:count})})}};let __namedExportsOrder=["Playground","Bars","Mouse","Toggle","Path","ThreeDimentional","Sequence","Wave","Countdown"]},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./src/core/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C2:()=>getStyle,Iq:()=>isSameObject,RR:()=>getKeys,ZT:()=>noop,bT:()=>isSameObjectArray,f0:()=>assign,qo:()=>toArray});var noop=function(){},getKeys=Object.keys,assign=Object.assign,isArray=Array.isArray,getStyle=function(e){return getComputedStyle(e)},isSameObject=function(){var target=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},prev=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},keys=getKeys(target);return keys.length===getKeys(prev).length&&keys.every(function(k){return target[k]===prev[k]})},isSameObjectArray=function(target,prev){return target.length===prev.length&&target.every(function(t,i){return isSameObject(t,prev[i])})},toArray=function(items){return isArray(items)?items:[items]}},"./src/core/waapi.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cz:()=>_finish,DR:()=>_waitFor,H9:()=>_cancel,K:()=>_setRate,KU:()=>_play,NU:()=>_pause,YQ:()=>_setTime,eo:()=>_reverse,ih:()=>createAnimation});var createAnimation=function(el,keyframes,options,timeline){var modifiedOptions=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){var value;value=source[key],key in target?Object.defineProperty(target,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):target[key]=value})}return target}({fill:"both"},options);try{return new Animation(new KeyframeEffect(el,keyframes,modifiedOptions),timeline)}catch(e){return el.animate(keyframes,modifiedOptions)}},_play=function(animation){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};animation.playbackRate<0&&"finished"===animation.playState&&_setRate(animation,function(p){return-p}),opts.restart&&_setTime(animation,0),animation.play()},_reverse=function(animation){animation&&animation.reverse()},_cancel=function(animation){animation&&animation.cancel()},_finish=function(animation){animation&&animation.finish()},_pause=function(animation){animation&&animation.pause()},_setTime=function(animation,arg){animation&&(animation.currentTime="function"==typeof arg?arg(animation.effect.getComputedTiming().endTime):arg)},_setRate=function(animation,arg){animation&&animation.updatePlaybackRate("function"==typeof arg?arg(animation.playbackRate):arg)},_waitFor=function(animation,name){return animation?new Promise(function(resolve){animation.onfinish=function(){("finish"===name&&animation.playbackRate>0||"reverseFinish"===name&&animation.playbackRate<0)&&resolve()}}):Promise.resolve()}},"./src/react/hooks/useAnimation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>useAnimation});var react=__webpack_require__("./node_modules/react/index.js"),utils=__webpack_require__("./src/core/utils.ts"),waapi=__webpack_require__("./src/core/waapi.ts"),useStatic=__webpack_require__("./src/react/hooks/useStatic.ts"),useLatestRef=__webpack_require__("./src/react/hooks/useLatestRef.ts"),animations=new WeakMap,getAnimation=function(target){return animations.get(target)},deleteAnimation=function(target){var _getAnimation;null===(_getAnimation=getAnimation(target))||void 0===_getAnimation||_getAnimation.cancel(),animations.delete(target)},initAnimation=function(el,target,prevTarget){var prevAnimation=prevTarget&&getAnimation(prevTarget);if(prevAnimation){if(animations.delete(prevTarget),(0,utils.bT)(target._keyframes,prevTarget._keyframes)&&(0,utils.Iq)(target._options,prevTarget._options))return animations.set(target,prevAnimation),prevAnimation;prevAnimation.cancel()}var animation=(0,waapi.ih)(el,target._keyframes,target._options,target._timeline);return animations.set(target,animation),animation};function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _sliced_to_array(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}(arr,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var useAnimation=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var argsRef=(0,useLatestRef.I)(args),_useStatic=(0,useStatic.T)(function(){var _active,_target=null,init=function(args){if(_target){var el,_argsRef_current=_sliced_to_array(argsRef.current,2),keyframe=_argsRef_current[0],tmp=_argsRef_current[1],_options=void 0===tmp?{}:tmp,timeline=_options.timeline,options=function(source,excluded){if(null==source)return{};var key,i,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}(_options,["timeline"]),prevActive=_active;return initAnimation(_target,_active={_keyframes:(el=_target,"function"==typeof keyframe?keyframe((0,utils.C2)(el),args):(0,utils.qo)(keyframe)),_options:options,_timeline:null==timeline?void 0:timeline._get()},prevActive)}},clean=function(){_active&&deleteAnimation(_active)},externalHandle=(0,utils.f0)(function(ref){(_target=ref)||clean()},{play:function(){for(var _len=arguments.length,opts=Array(_len),_key=0;_key<_len;_key++)opts[_key]=arguments[_key];var animation=init((opts[0]||{}).args);return animation&&(0,waapi.KU)(animation),externalHandle},reverse:function(){return _active&&(0,waapi.eo)(getAnimation(_active)),externalHandle},cancel:function(){return _active&&(0,waapi.H9)(getAnimation(_active)),externalHandle},finish:function(){return _active&&(0,waapi.Cz)(getAnimation(_active)),externalHandle},pause:function(){return _active&&(0,waapi.NU)(getAnimation(_active)),externalHandle},setTime:function(time){var animation=_active&&getAnimation(_active);if(!animation){if("function"==typeof _sliced_to_array(argsRef.current,1)[0])return externalHandle;animation=init(void 0)}return(0,waapi.YQ)(animation,time),externalHandle},setPlaybackRate:function(rate){return _active&&(0,waapi.K)(getAnimation(_active),rate),externalHandle},waitFor:function(event){return(0,waapi.DR)(_active&&getAnimation(_active),event).then(function(){return externalHandle})}});return[externalHandle,function(){return clean}]}),_useStatic1=_sliced_to_array(_useStatic,2),handle=_useStatic1[0],mount=_useStatic1[1];return(0,react.useEffect)(mount,[]),handle}},"./src/react/hooks/useIsomorphicLayoutEffect.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>useIsomorphicLayoutEffect});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),useIsomorphicLayoutEffect="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect},"./src/react/hooks/useLatestRef.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>useLatestRef});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react/hooks/useIsomorphicLayoutEffect.ts"),useLatestRef=function(value){var ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value);return(0,_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__.L)(function(){ref.current=value},[value]),ref}},"./src/react/hooks/useStatic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>useStatic});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),useStatic=function(init){var ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return ref.current||(ref.current=init())}}}]);
//# sourceMappingURL=hooks-useAnimation-stories.3343875a.iframe.bundle.js.map