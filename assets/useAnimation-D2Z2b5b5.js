import{r as d}from"./iframe-C1D3SbRn.js";import{i as k,o as h,j as v,u as R,a as S,k as b,_ as j,c as w,h as x,b as E,d as F,e as O,f as q,g as z,p as H,t as K}from"./useLatestRef-BOEH2WHL.js";const f=new WeakMap,a=t=>f.get(t),L=t=>{a(t)?.cancel(),f.delete(t)},M=(t,n)=>h(t._keyframes,n._keyframes)&&v(t._options,n._options),P=(t,n,o)=>{const u=o&&a(o);if(u){if(f.delete(o),M(n,o))return f.set(n,u),u;u.cancel()}const c=k(t,n._keyframes,n._options,n._timeline);return f.set(n,c),c},W=(t,n,o)=>typeof n=="function"?n(H(t),o):K(n),D=(...t)=>{const n=R(t),[o,u]=S(()=>{let c=null,e;const l=s=>{if(!c)return;const[r,m={}]=n.current,{timeline:p,...y}=m,A=e;return P(c,e={_keyframes:W(c,r,s),_options:y,_timeline:p?._get()},A)},_=()=>{e&&L(e)},i=b(s=>{(c=s)||_()},{play:(...s)=>{const r=l((s[0]||{}).args);return r&&x(r),i},reverse:()=>(e&&z(a(e)),i),cancel:()=>(e&&q(a(e)),i),finish:()=>(e&&O(a(e)),i),pause:()=>(e&&F(a(e)),i),setTime:s=>{let r=e&&a(e);if(!r){const[m]=n.current;if(typeof m=="function")return i;r=l(void 0)}return w(r,s),i},setPlaybackRate:s=>(e&&E(a(e),s),i),waitFor:s=>j(e&&a(e),s).then(()=>i)});return[i,()=>_]});return d.useEffect(u,[]),o};export{D as u};
