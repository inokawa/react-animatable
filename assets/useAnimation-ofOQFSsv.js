import{r as k}from"./iframe-CLym-1vj.js";import{d as h,o as v,i as R,u as S,a as b,k as j,_ as w,f as x,c as E,e as F,g as O,h as q,j as z,b as H,p as K,t as L}from"./useLatestRef-CA1t_R2X.js";const u=new WeakMap,l=i=>u.get(i),M=i=>{l(i)?.cancel(),u.delete(i)},P=(i,t)=>v(i._keyframes,t._keyframes)&&R(i._options,t._options),W=(i,t,a)=>{const c=a&&l(a);if(c){if(u.delete(a),P(t,a))return u.set(t,c),c;c.cancel()}const o=h(i,t._keyframes,t._options,t._timeline);return u.set(t,o),o},B=(i,t,a)=>typeof t=="function"?t(K(i),a):L(t),G=(...i)=>{const t=S(i),[a,c]=b(()=>{let o=null,m;const r=()=>m&&l(m),_=n=>{if(!o)return;const[e,f={}]=t.current,{timeline:y,...A}=f,d=m;return W(o,m={_keyframes:B(o,e,n),_options:A,_timeline:y?._get()},d)},p=()=>{m&&M(m)},s=j(n=>{(o=n)||p()},{play:(...n)=>{const e=_((n[0]||{}).args);return e&&E(e),s},reverse:()=>{const n=r();return n&&H(n),s},cancel:()=>{const n=r();return n&&z(n),s},finish:()=>{const n=r();return n&&q(n),s},pause:()=>{const n=r();return n&&O(n),s},setTime:n=>{let e=r();if(!e){const[f]=t.current;if(typeof f=="function")return s;e=_(void 0)}return e&&x(e,n),s},setPlaybackRate:n=>{const e=r();return e&&F(e,n),s},waitFor:n=>{const e=r();return w(e,n).then(()=>s)}});return[s,()=>p]});return k.useEffect(c,[]),a};export{G as u};
