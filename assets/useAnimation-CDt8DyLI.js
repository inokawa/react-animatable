import{r as d}from"./iframe-2ubdBSbI.js";import{i as k,o as h,j as v,u as R,a as S,k as b,_ as j,c as w,h as x,b as E,d as F,e as O,f as q,g as z,p as H,t as K}from"./useLatestRef-BUZ-4JWQ.js";const f=new WeakMap,a=n=>f.get(n),L=n=>{a(n)?.cancel(),f.delete(n)},M=(n,t)=>h(n._keyframes,t._keyframes)&&v(n._options,t._options),P=(n,t,r)=>{const u=r&&a(r);if(u){if(f.delete(r),M(t,r))return f.set(t,u),u;u.cancel()}const c=k(n,t._keyframes,t._options,t._timeline);return f.set(t,c),c},W=(n,t,r)=>typeof t=="function"?t(H(n),r):K(t),C=(...n)=>{const t=R(n),[r,u]=S(()=>{let c=null,e;const l=s=>{if(!c)return;const[o,m={}]=t.current,{timeline:p,...y}=m,A=e;return P(c,e={_keyframes:W(c,o,s),_options:y,_timeline:p?._get()},A)},_=()=>{e&&L(e)},i=b(s=>{(c=s)||_()},{play:(...s)=>{const o=l((s[0]||{}).args);return o&&x(o),i},reverse:()=>(e&&z(a(e)),i),cancel:()=>(e&&q(a(e)),i),finish:()=>(e&&O(a(e)),i),pause:()=>(e&&F(a(e)),i),setTime:s=>{let o=e&&a(e);if(!o){const[m]=t.current;if(typeof m=="function")return i;o=l(void 0)}return w(o,s),i},setPlaybackRate:s=>(e&&E(a(e),s),i),waitFor:s=>j(e&&a(e),s).then(()=>i)});return[i,()=>_]});return d.useEffect(u,[]),r};export{C as u};
